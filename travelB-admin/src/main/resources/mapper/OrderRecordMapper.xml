<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.liketry.mapper.OrderRecordMapper">
    <resultMap id="BaseResultMap" type="com.liketry.domain.OrderRecord">
        <!--
        WARNING - @mbggenerated
        This element is automatically generated by MyBatis Generator, do not modify.
        This element was generated on Mon Aug 28 12:31:56 CST 2017.
        -->

        <id column="id" jdbcType="CHAR" property="id"/>
        <result column="or_number" jdbcType="CHAR" property="orNumber"/>
        <result column="or_code" jdbcType="CHAR" property="orCode"/>
        <result column="or_source_id" jdbcType="CHAR" property="orSourceId"/>
        <result column="or_source_code" jdbcType="CHAR" property="orNumber"/>
        <result column="or_user_name" jdbcType="CHAR" property="orUserName"/>
        <result column="or_user_icon" jdbcType="CHAR" property="orUserIcon"/>
        <result column="or_type" jdbcType="BIT" property="orType"/>
        <result column="transaction_no" jdbcType="CHAR" property="transactionNo"/>
        <result column="or_mobile" jdbcType="CHAR" property="orMobile"/>
        <result column="or_transaction_number" jdbcType="CHAR" property="orTransactionNumber"/>
        <result column="or_merchant_id" jdbcType="CHAR" property="orMerchantId"/>
        <result column="or_status" jdbcType="BIT" property="orStatus"/>
        <result column="or_user_id" jdbcType="CHAR" property="orUserId"/>
        <result column="or_order_time" jdbcType="TIMESTAMP" property="orOrderTime"/>
        <result column="or_pay_time" jdbcType="TIMESTAMP" property="orPayTime"/>
        <result column="or_back_time" jdbcType="TIMESTAMP" property="orBackTime"/>
        <result column="or_refund_time" jdbcType="TIMESTAMP" property="orRefundTime"/>
        <result column="or_pay_price" jdbcType="DECIMAL" property="orPayPrice"/>
        <result column="or_merchant_gain" jdbcType="DECIMAL" property="orMerchantGain"/>
        <result column="or_refund_price" jdbcType="DECIMAL" property="orRefundPrice"/>
        <result column="or_merchant_back_price" jdbcType="DECIMAL" property="orMerchantBackPrice"/>
        <result column="or_balance" jdbcType="DECIMAL" property="orBalance"/>
        <result column="or_info" jdbcType="VARCHAR" property="orInfo"/>
        <result column="create_user_id" jdbcType="VARCHAR" property="createUserId"/>
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="update_user_id" jdbcType="VARCHAR" property="updateUserId"/>
        <result column="update_time" jdbcType="TIMESTAMP" property="updateTime"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
        WARNING - @mbggenerated
        This element is automatically generated by MyBatis Generator, do not modify.
        This element was generated on Mon Aug 28 12:31:56 CST 2017.
        -->
        id, or_number, or_transaction_number, or_merchant_id, or_status, or_user_id, or_order_time,
        or_pay_time, or_back_time, or_refund_time, or_pay_price, or_merchant_gain, or_refund_price,
        or_merchant_back_price, or_balance, or_info, create_user_id, create_time, update_user_id,
        update_time
    </sql>

    <select id="generalIncome" resultType="java.lang.Float">
        select ifnull(sum(or_merchant_gain) - sum(or_merchant_back_price) ,0) from order_record where or_merchant_id = #{merchantId} and create_time between #{start} and #{end}
  </select>
</mapper>