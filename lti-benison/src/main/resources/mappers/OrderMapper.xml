<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.liketry.interaction.benison.dao.OrderMapper">
  <resultMap id="BaseResultMap" type="com.liketry.interaction.benison.model.Order">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 17 11:36:04 CST 2017.
    -->
    <id column="order_id" jdbcType="VARCHAR" property="orderId" />
    <result column="order_code" jdbcType="VARCHAR" property="orderCode" />
    <result column="transaction_no" jdbcType="VARCHAR" property="transactionNo" />
    <result column="order_type" jdbcType="CHAR" property="orderType" />
    <result column="order_status" jdbcType="CHAR" property="orderStatus" />
    <result column="user_id" jdbcType="VARCHAR" property="userId" />
    <result column="book_acount_id" jdbcType="VARCHAR" property="bookAcountId" />
    <result column="scene" jdbcType="VARCHAR" property="scene" />
    <result column="user_nickname" jdbcType="VARCHAR" property="userNickname" />
    <result column="user_phone" jdbcType="VARCHAR" property="userPhone" />
    <result column="bless_name" jdbcType="VARCHAR" property="blessName" />
    <result column="write_name" jdbcType="VARCHAR" property="writeName" />
    <result column="template_id" jdbcType="VARCHAR" property="templateId" />
    <result column="screen_id" jdbcType="VARCHAR" property="screenId" />
    <result column="screen_name" jdbcType="VARCHAR" property="screenName" />
    <result column="type_id" jdbcType="VARCHAR" property="typeId" />
    <result column="type_name" jdbcType="VARCHAR" property="typeName" />
    <result column="benison_id" jdbcType="VARCHAR" property="benisonId" />
    <result column="benison_content" jdbcType="VARCHAR" property="benisonContent" />
    <result column="rule_content" jdbcType="VARCHAR" property="ruleContent" />
    <result column="bkimg_id" jdbcType="VARCHAR" property="bkimgId" />
    <result column="bkimg_name" jdbcType="VARCHAR" property="bkimgName" />
    <result column="bkimg_url" jdbcType="VARCHAR" property="bkimgUrl" />
    <result column="total_price" jdbcType="DECIMAL" property="totalPrice" />
    <result column="total_orig_price" jdbcType="DECIMAL" property="totalOrigPrice" />
    <result column="pay_type" jdbcType="VARCHAR" property="payType" />
    <result column="pay_time" jdbcType="VARCHAR" property="payTime" />
    <result column="pay_price" jdbcType="DECIMAL" property="payPrice" />
    <result column="confirm_status" jdbcType="CHAR" property="confirmStatus" />
    <result column="confirm_time" jdbcType="VARCHAR" property="confirmTime" />
    <result column="confirm_by" jdbcType="VARCHAR" property="confirmBy" />
    <result column="confirm_id" jdbcType="VARCHAR" property="confirmId" />
    <result column="confirm_reason" jdbcType="VARCHAR" property="confirmReason" />
    <result column="back_time" jdbcType="VARCHAR" property="backTime" />
    <result column="back_by" jdbcType="VARCHAR" property="backBy" />
    <result column="back_id" jdbcType="VARCHAR" property="backId" />
    <result column="back_reason" jdbcType="VARCHAR" property="backReason" />
    <result column="back_price" jdbcType="DECIMAL" property="backPrice" />
    <result column="back_remarks" jdbcType="VARCHAR" property="backRemarks" />
    <result column="order_descriptiion" jdbcType="VARCHAR" property="orderDescriptiion" />
    <result column="export_by" jdbcType="VARCHAR" property="exportBy" />
    <result column="export_id" jdbcType="VARCHAR" property="exportId" />
    <result column="export_time" jdbcType="VARCHAR" property="exportTime" />
    <result column="result_url" jdbcType="VARCHAR" property="resultUrl" />
    <result column="share_url" jdbcType="VARCHAR" property="shareUrl" />
    <result column="promotion_id" jdbcType="VARCHAR" property="promotionId" />
    <result column="created_time" jdbcType="TIMESTAMP" property="createdTime" />
    <result column="created_by" jdbcType="VARCHAR" property="createdBy" />
    <result column="modified_time" jdbcType="TIMESTAMP" property="modifiedTime" />
    <result column="modified_by" jdbcType="VARCHAR" property="modifiedBy" />
    <result column="version" jdbcType="INTEGER" property="version" />
    <result column="delflag" jdbcType="CHAR" property="delflag" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 17 11:36:04 CST 2017.
    -->
    order_id, order_code, transaction_no, order_type, order_status, user_id,book_acount_id,scene, user_nickname, 
    user_phone, bless_name, write_name, template_id, screen_id, screen_name, type_id, 
    type_name, benison_id, benison_content, rule_content, bkimg_id, bkimg_name, bkimg_url, 
    total_price, total_orig_price, pay_type, pay_time, pay_price, confirm_status, confirm_time, 
    confirm_by, confirm_id, confirm_reason, back_time, back_by, back_id, back_reason, 
    back_price, back_remarks, order_descriptiion, export_by, export_id, export_time, 
    result_url, share_url, promotion_id, created_time, created_by, modified_time, modified_by, 
    version, delflag
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 17 11:36:04 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from bu_order
    where order_id = #{orderId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 17 11:36:04 CST 2017.
    -->
    delete from bu_order
    where order_id = #{orderId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.liketry.interaction.benison.model.Order">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 17 11:36:04 CST 2017.
    -->
    insert into bu_order (order_id, order_code, transaction_no, 
      order_type, order_status, user_id,book_acount_id,scene, 
      user_nickname, user_phone, bless_name, 
      write_name, template_id, screen_id, 
      screen_name, type_id, type_name, 
      benison_id, benison_content, rule_content, 
      bkimg_id, bkimg_name, bkimg_url, 
      total_price, total_orig_price, pay_type, 
      pay_time, pay_price, confirm_status, 
      confirm_time, confirm_by, confirm_id, 
      confirm_reason, back_time, back_by, 
      back_id, back_reason, back_price, 
      back_remarks, order_descriptiion, export_by, 
      export_id, export_time, result_url, 
      share_url, promotion_id, created_time, 
      created_by, modified_time, modified_by, 
      version, delflag)
    values (#{orderId,jdbcType=VARCHAR}, #{orderCode,jdbcType=VARCHAR}, #{transactionNo,jdbcType=VARCHAR}, 
      #{orderType,jdbcType=CHAR}, #{orderStatus,jdbcType=CHAR}, #{userId,jdbcType=VARCHAR},#{bookAcountId,jdbcType=VARCHAR}, #{scene,jdbcType=VARCHAR}, 
      #{userNickname,jdbcType=VARCHAR}, #{userPhone,jdbcType=VARCHAR}, #{blessName,jdbcType=VARCHAR}, 
      #{writeName,jdbcType=VARCHAR}, #{templateId,jdbcType=VARCHAR}, #{screenId,jdbcType=VARCHAR}, 
      #{screenName,jdbcType=VARCHAR}, #{typeId,jdbcType=VARCHAR}, #{typeName,jdbcType=VARCHAR}, 
      #{benisonId,jdbcType=VARCHAR}, #{benisonContent,jdbcType=VARCHAR}, #{ruleContent,jdbcType=VARCHAR}, 
      #{bkimgId,jdbcType=VARCHAR}, #{bkimgName,jdbcType=VARCHAR}, #{bkimgUrl,jdbcType=VARCHAR}, 
      #{totalPrice,jdbcType=DECIMAL}, #{totalOrigPrice,jdbcType=DECIMAL}, #{payType,jdbcType=VARCHAR}, 
      #{payTime,jdbcType=VARCHAR}, #{payPrice,jdbcType=DECIMAL}, #{confirmStatus,jdbcType=CHAR}, 
      #{confirmTime,jdbcType=VARCHAR}, #{confirmBy,jdbcType=VARCHAR}, #{confirmId,jdbcType=VARCHAR}, 
      #{confirmReason,jdbcType=VARCHAR}, #{backTime,jdbcType=VARCHAR}, #{backBy,jdbcType=VARCHAR}, 
      #{backId,jdbcType=VARCHAR}, #{backReason,jdbcType=VARCHAR}, #{backPrice,jdbcType=DECIMAL}, 
      #{backRemarks,jdbcType=VARCHAR}, #{orderDescriptiion,jdbcType=VARCHAR}, #{exportBy,jdbcType=VARCHAR}, 
      #{exportId,jdbcType=VARCHAR}, #{exportTime,jdbcType=VARCHAR}, #{resultUrl,jdbcType=VARCHAR}, 
      #{shareUrl,jdbcType=VARCHAR}, #{promotionId,jdbcType=VARCHAR}, #{createdTime,jdbcType=TIMESTAMP}, 
      #{createdBy,jdbcType=VARCHAR}, #{modifiedTime,jdbcType=TIMESTAMP}, #{modifiedBy,jdbcType=VARCHAR}, 
      #{version,jdbcType=INTEGER}, #{delflag,jdbcType=CHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.liketry.interaction.benison.model.Order">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 17 11:36:04 CST 2017.
    -->
    insert into bu_order
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="orderId != null">
        order_id,
      </if>
      <if test="orderCode != null">
        order_code,
      </if>
      <if test="transactionNo != null">
        transaction_no,
      </if>
      <if test="orderType != null">
        order_type,
      </if>
      <if test="orderStatus != null">
        order_status,
      </if>
      <if test="userId != null">
        user_id,
      </if>
      <if test="bookAcountId != null">
        book_acount_id,
      </if>
      <if test="scene != null">
        scene,
      </if>
      <if test="userNickname != null">
        user_nickname,
      </if>
      <if test="userPhone != null">
        user_phone,
      </if>
      <if test="blessName != null">
        bless_name,
      </if>
      <if test="writeName != null">
        write_name,
      </if>
      <if test="templateId != null">
        template_id,
      </if>
      <if test="screenId != null">
        screen_id,
      </if>
      <if test="screenName != null">
        screen_name,
      </if>
      <if test="typeId != null">
        type_id,
      </if>
      <if test="typeName != null">
        type_name,
      </if>
      <if test="benisonId != null">
        benison_id,
      </if>
      <if test="benisonContent != null">
        benison_content,
      </if>
      <if test="ruleContent != null">
        rule_content,
      </if>
      <if test="bkimgId != null">
        bkimg_id,
      </if>
      <if test="bkimgName != null">
        bkimg_name,
      </if>
      <if test="bkimgUrl != null">
        bkimg_url,
      </if>
      <if test="totalPrice != null">
        total_price,
      </if>
      <if test="totalOrigPrice != null">
        total_orig_price,
      </if>
      <if test="payType != null">
        pay_type,
      </if>
      <if test="payTime != null">
        pay_time,
      </if>
      <if test="payPrice != null">
        pay_price,
      </if>
      <if test="confirmStatus != null">
        confirm_status,
      </if>
      <if test="confirmTime != null">
        confirm_time,
      </if>
      <if test="confirmBy != null">
        confirm_by,
      </if>
      <if test="confirmId != null">
        confirm_id,
      </if>
      <if test="confirmReason != null">
        confirm_reason,
      </if>
      <if test="backTime != null">
        back_time,
      </if>
      <if test="backBy != null">
        back_by,
      </if>
      <if test="backId != null">
        back_id,
      </if>
      <if test="backReason != null">
        back_reason,
      </if>
      <if test="backPrice != null">
        back_price,
      </if>
      <if test="backRemarks != null">
        back_remarks,
      </if>
      <if test="orderDescriptiion != null">
        order_descriptiion,
      </if>
      <if test="exportBy != null">
        export_by,
      </if>
      <if test="exportId != null">
        export_id,
      </if>
      <if test="exportTime != null">
        export_time,
      </if>
      <if test="resultUrl != null">
        result_url,
      </if>
      <if test="shareUrl != null">
        share_url,
      </if>
      <if test="promotionId != null">
        promotion_id,
      </if>
      <if test="createdTime != null">
        created_time,
      </if>
      <if test="createdBy != null">
        created_by,
      </if>
      <if test="modifiedTime != null">
        modified_time,
      </if>
      <if test="modifiedBy != null">
        modified_by,
      </if>
      <if test="version != null">
        version,
      </if>
      <if test="delflag != null">
        delflag,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="orderId != null">
        #{orderId,jdbcType=VARCHAR},
      </if>
      <if test="orderCode != null">
        #{orderCode,jdbcType=VARCHAR},
      </if>
      <if test="transactionNo != null">
        #{transactionNo,jdbcType=VARCHAR},
      </if>
      <if test="orderType != null">
        #{orderType,jdbcType=CHAR},
      </if>
      <if test="orderStatus != null">
        #{orderStatus,jdbcType=CHAR},
      </if>
      <if test="userId != null">
        #{userId,jdbcType=VARCHAR},
      </if>
      <if test="bookAcountId != null">
      	#{bookAcountId,jdbcType=VARCHAR},
      </if>
      <if test="scene != null">
        #{scene,jdbcType=VARCHAR},
      </if>
      <if test="userNickname != null">
        #{userNickname,jdbcType=VARCHAR},
      </if>
      <if test="userPhone != null">
        #{userPhone,jdbcType=VARCHAR},
      </if>
      <if test="blessName != null">
        #{blessName,jdbcType=VARCHAR},
      </if>
      <if test="writeName != null">
        #{writeName,jdbcType=VARCHAR},
      </if>
      <if test="templateId != null">
        #{templateId,jdbcType=VARCHAR},
      </if>
      <if test="screenId != null">
        #{screenId,jdbcType=VARCHAR},
      </if>
      <if test="screenName != null">
        #{screenName,jdbcType=VARCHAR},
      </if>
      <if test="typeId != null">
        #{typeId,jdbcType=VARCHAR},
      </if>
      <if test="typeName != null">
        #{typeName,jdbcType=VARCHAR},
      </if>
      <if test="benisonId != null">
        #{benisonId,jdbcType=VARCHAR},
      </if>
      <if test="benisonContent != null">
        #{benisonContent,jdbcType=VARCHAR},
      </if>
      <if test="ruleContent != null">
        #{ruleContent,jdbcType=VARCHAR},
      </if>
      <if test="bkimgId != null">
        #{bkimgId,jdbcType=VARCHAR},
      </if>
      <if test="bkimgName != null">
        #{bkimgName,jdbcType=VARCHAR},
      </if>
      <if test="bkimgUrl != null">
        #{bkimgUrl,jdbcType=VARCHAR},
      </if>
      <if test="totalPrice != null">
        #{totalPrice,jdbcType=DECIMAL},
      </if>
      <if test="totalOrigPrice != null">
        #{totalOrigPrice,jdbcType=DECIMAL},
      </if>
      <if test="payType != null">
        #{payType,jdbcType=VARCHAR},
      </if>
      <if test="payTime != null">
        #{payTime,jdbcType=VARCHAR},
      </if>
      <if test="payPrice != null">
        #{payPrice,jdbcType=DECIMAL},
      </if>
      <if test="confirmStatus != null">
        #{confirmStatus,jdbcType=CHAR},
      </if>
      <if test="confirmTime != null">
        #{confirmTime,jdbcType=VARCHAR},
      </if>
      <if test="confirmBy != null">
        #{confirmBy,jdbcType=VARCHAR},
      </if>
      <if test="confirmId != null">
        #{confirmId,jdbcType=VARCHAR},
      </if>
      <if test="confirmReason != null">
        #{confirmReason,jdbcType=VARCHAR},
      </if>
      <if test="backTime != null">
        #{backTime,jdbcType=VARCHAR},
      </if>
      <if test="backBy != null">
        #{backBy,jdbcType=VARCHAR},
      </if>
      <if test="backId != null">
        #{backId,jdbcType=VARCHAR},
      </if>
      <if test="backReason != null">
        #{backReason,jdbcType=VARCHAR},
      </if>
      <if test="backPrice != null">
        #{backPrice,jdbcType=DECIMAL},
      </if>
      <if test="backRemarks != null">
        #{backRemarks,jdbcType=VARCHAR},
      </if>
      <if test="orderDescriptiion != null">
        #{orderDescriptiion,jdbcType=VARCHAR},
      </if>
      <if test="exportBy != null">
        #{exportBy,jdbcType=VARCHAR},
      </if>
      <if test="exportId != null">
        #{exportId,jdbcType=VARCHAR},
      </if>
      <if test="exportTime != null">
        #{exportTime,jdbcType=VARCHAR},
      </if>
      <if test="resultUrl != null">
        #{resultUrl,jdbcType=VARCHAR},
      </if>
      <if test="shareUrl != null">
        #{shareUrl,jdbcType=VARCHAR},
      </if>
      <if test="promotionId != null">
        #{promotionId,jdbcType=VARCHAR},
      </if>
      <if test="createdTime != null">
        #{createdTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createdBy != null">
        #{createdBy,jdbcType=VARCHAR},
      </if>
      <if test="modifiedTime != null">
        #{modifiedTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifiedBy != null">
        #{modifiedBy,jdbcType=VARCHAR},
      </if>
      <if test="version != null">
        #{version,jdbcType=INTEGER},
      </if>
      <if test="delflag != null">
        #{delflag,jdbcType=CHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.liketry.interaction.benison.model.Order">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 17 11:36:04 CST 2017.
    -->
    update bu_order
    <set>
      <if test="orderCode != null">
        order_code = #{orderCode,jdbcType=VARCHAR},
      </if>
      <if test="transactionNo != null">
        transaction_no = #{transactionNo,jdbcType=VARCHAR},
      </if>
      <if test="orderType != null">
        order_type = #{orderType,jdbcType=CHAR},
      </if>
      <if test="orderStatus != null">
        order_status = #{orderStatus,jdbcType=CHAR},
      </if>
      <if test="userId != null">
        user_id = #{userId,jdbcType=VARCHAR},
      </if>
      <if test="bookAcountId != null">
      	book_acount_id = #{bookAcountId,jdbcType=VARCHAR},
      </if>
      <if test="scene != null">
        scene = #{scene,jdbcType=VARCHAR},
      </if>
      <if test="userNickname != null">
        user_nickname = #{userNickname,jdbcType=VARCHAR},
      </if>
      <if test="userPhone != null">
        user_phone = #{userPhone,jdbcType=VARCHAR},
      </if>
      <if test="blessName != null">
        bless_name = #{blessName,jdbcType=VARCHAR},
      </if>
      <if test="writeName != null">
        write_name = #{writeName,jdbcType=VARCHAR},
      </if>
      <if test="templateId != null">
        template_id = #{templateId,jdbcType=VARCHAR},
      </if>
      <if test="screenId != null">
        screen_id = #{screenId,jdbcType=VARCHAR},
      </if>
      <if test="screenName != null">
        screen_name = #{screenName,jdbcType=VARCHAR},
      </if>
      <if test="typeId != null">
        type_id = #{typeId,jdbcType=VARCHAR},
      </if>
      <if test="typeName != null">
        type_name = #{typeName,jdbcType=VARCHAR},
      </if>
      <if test="benisonId != null">
        benison_id = #{benisonId,jdbcType=VARCHAR},
      </if>
      <if test="benisonContent != null">
        benison_content = #{benisonContent,jdbcType=VARCHAR},
      </if>
      <if test="ruleContent != null">
        rule_content = #{ruleContent,jdbcType=VARCHAR},
      </if>
      <if test="bkimgId != null">
        bkimg_id = #{bkimgId,jdbcType=VARCHAR},
      </if>
      <if test="bkimgName != null">
        bkimg_name = #{bkimgName,jdbcType=VARCHAR},
      </if>
      <if test="bkimgUrl != null">
        bkimg_url = #{bkimgUrl,jdbcType=VARCHAR},
      </if>
      <if test="totalPrice != null">
        total_price = #{totalPrice,jdbcType=DECIMAL},
      </if>
      <if test="totalOrigPrice != null">
        total_orig_price = #{totalOrigPrice,jdbcType=DECIMAL},
      </if>
      <if test="payType != null">
        pay_type = #{payType,jdbcType=VARCHAR},
      </if>
      <if test="payTime != null">
        pay_time = #{payTime,jdbcType=VARCHAR},
      </if>
      <if test="payPrice != null">
        pay_price = #{payPrice,jdbcType=DECIMAL},
      </if>
      <if test="confirmStatus != null">
        confirm_status = #{confirmStatus,jdbcType=CHAR},
      </if>
      <if test="confirmTime != null">
        confirm_time = #{confirmTime,jdbcType=VARCHAR},
      </if>
      <if test="confirmBy != null">
        confirm_by = #{confirmBy,jdbcType=VARCHAR},
      </if>
      <if test="confirmId != null">
        confirm_id = #{confirmId,jdbcType=VARCHAR},
      </if>
      <if test="confirmReason != null">
        confirm_reason = #{confirmReason,jdbcType=VARCHAR},
      </if>
      <if test="backTime != null">
        back_time = #{backTime,jdbcType=VARCHAR},
      </if>
      <if test="backBy != null">
        back_by = #{backBy,jdbcType=VARCHAR},
      </if>
      <if test="backId != null">
        back_id = #{backId,jdbcType=VARCHAR},
      </if>
      <if test="backReason != null">
        back_reason = #{backReason,jdbcType=VARCHAR},
      </if>
      <if test="backPrice != null">
        back_price = #{backPrice,jdbcType=DECIMAL},
      </if>
      <if test="backRemarks != null">
        back_remarks = #{backRemarks,jdbcType=VARCHAR},
      </if>
      <if test="orderDescriptiion != null">
        order_descriptiion = #{orderDescriptiion,jdbcType=VARCHAR},
      </if>
      <if test="exportBy != null">
        export_by = #{exportBy,jdbcType=VARCHAR},
      </if>
      <if test="exportId != null">
        export_id = #{exportId,jdbcType=VARCHAR},
      </if>
      <if test="exportTime != null">
        export_time = #{exportTime,jdbcType=VARCHAR},
      </if>
      <if test="resultUrl != null">
        result_url = #{resultUrl,jdbcType=VARCHAR},
      </if>
      <if test="shareUrl != null">
        share_url = #{shareUrl,jdbcType=VARCHAR},
      </if>
      <if test="promotionId != null">
        promotion_id = #{promotionId,jdbcType=VARCHAR},
      </if>
      <if test="createdTime != null">
        created_time = #{createdTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createdBy != null">
        created_by = #{createdBy,jdbcType=VARCHAR},
      </if>
      <if test="modifiedTime != null">
        modified_time = #{modifiedTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifiedBy != null">
        modified_by = #{modifiedBy,jdbcType=VARCHAR},
      </if>
      <if test="version != null">
        version = #{version,jdbcType=INTEGER},
      </if>
      <if test="delflag != null">
        delflag = #{delflag,jdbcType=CHAR},
      </if>
    </set>
    where order_id = #{orderId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.liketry.interaction.benison.model.Order">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 17 11:36:04 CST 2017.
    -->
    update bu_order
    set order_code = #{orderCode,jdbcType=VARCHAR},
      transaction_no = #{transactionNo,jdbcType=VARCHAR},
      order_type = #{orderType,jdbcType=CHAR},
      order_status = #{orderStatus,jdbcType=CHAR},
      user_id = #{userId,jdbcType=VARCHAR},
      book_acount_id = #{bookAcountId,jdbcType=VARCHAR},
      scene = #{scene,jdbcType=VARCHAR},
      user_nickname = #{userNickname,jdbcType=VARCHAR},
      user_phone = #{userPhone,jdbcType=VARCHAR},
      bless_name = #{blessName,jdbcType=VARCHAR},
      write_name = #{writeName,jdbcType=VARCHAR},
      template_id = #{templateId,jdbcType=VARCHAR},
      screen_id = #{screenId,jdbcType=VARCHAR},
      screen_name = #{screenName,jdbcType=VARCHAR},
      type_id = #{typeId,jdbcType=VARCHAR},
      type_name = #{typeName,jdbcType=VARCHAR},
      benison_id = #{benisonId,jdbcType=VARCHAR},
      benison_content = #{benisonContent,jdbcType=VARCHAR},
      rule_content = #{ruleContent,jdbcType=VARCHAR},
      bkimg_id = #{bkimgId,jdbcType=VARCHAR},
      bkimg_name = #{bkimgName,jdbcType=VARCHAR},
      bkimg_url = #{bkimgUrl,jdbcType=VARCHAR},
      total_price = #{totalPrice,jdbcType=DECIMAL},
      total_orig_price = #{totalOrigPrice,jdbcType=DECIMAL},
      pay_type = #{payType,jdbcType=VARCHAR},
      pay_time = #{payTime,jdbcType=VARCHAR},
      pay_price = #{payPrice,jdbcType=DECIMAL},
      confirm_status = #{confirmStatus,jdbcType=CHAR},
      confirm_time = #{confirmTime,jdbcType=VARCHAR},
      confirm_by = #{confirmBy,jdbcType=VARCHAR},
      confirm_id = #{confirmId,jdbcType=VARCHAR},
      confirm_reason = #{confirmReason,jdbcType=VARCHAR},
      back_time = #{backTime,jdbcType=VARCHAR},
      back_by = #{backBy,jdbcType=VARCHAR},
      back_id = #{backId,jdbcType=VARCHAR},
      back_reason = #{backReason,jdbcType=VARCHAR},
      back_price = #{backPrice,jdbcType=DECIMAL},
      back_remarks = #{backRemarks,jdbcType=VARCHAR},
      order_descriptiion = #{orderDescriptiion,jdbcType=VARCHAR},
      export_by = #{exportBy,jdbcType=VARCHAR},
      export_id = #{exportId,jdbcType=VARCHAR},
      export_time = #{exportTime,jdbcType=VARCHAR},
      result_url = #{resultUrl,jdbcType=VARCHAR},
      share_url = #{shareUrl,jdbcType=VARCHAR},
      promotion_id = #{promotionId,jdbcType=VARCHAR},
      created_time = #{createdTime,jdbcType=TIMESTAMP},
      created_by = #{createdBy,jdbcType=VARCHAR},
      modified_time = #{modifiedTime,jdbcType=TIMESTAMP},
      modified_by = #{modifiedBy,jdbcType=VARCHAR},
      version = #{version,jdbcType=INTEGER},
      delflag = #{delflag,jdbcType=CHAR}
    where order_id = #{orderId,jdbcType=VARCHAR}
  </update>
  <select id="findOrderListByUserId" parameterType="String" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from bu_order
    where delflag = '1'
    <if test="userId != null">
         <![CDATA[and user_id = #{userId,jdbcType=VARCHAR}]]>
     </if>
  </select>
  <select id="findOrderListByStatus" parameterType="String" resultMap="BaseResultMap">
  	select 
  	o.*
  	from bu_order o
  	where 
  	o.delflag = '1' 
  	<if test="orderStatus != null and orderStatus != '' and orderStatus != 'null' ">
         <![CDATA[and o.order_status = #{orderStatus,jdbcType=VARCHAR}]]>
    </if>
    <if test="userId != null and userId != '' and userId != 'null' ">
         <![CDATA[and o.user_id =#{userId,jdbcType=VARCHAR}]]>
    </if>
    order by o.created_time desc
    limit #{pageSize,jdbcType=INTEGER},#{pageNumber,jdbcType=INTEGER}
  </select>
  
	<select id="findLastOne" parameterType="String" resultMap="BaseResultMap">
		<![CDATA[ 
		SELECT A.* FROM bu_order A where A.order_code like concat('%', #{screenCode}, '%')
		ORDER BY A.created_time DESC
		limit 1 ]]>
  	</select>
  	
	<select id="getAllCount" resultType="int">
		select count(*)
	  	from bu_order o
	  	where 
	  	o.delflag = '1'
	  	<if test="orderStatus != null and orderStatus != '' and orderStatus != 'null' ">
	         <![CDATA[and o.order_status = #{orderStatus,jdbcType=VARCHAR}]]>
	    </if>
	    <if test="userId != null and userId != '' and userId != 'null' ">
	         <![CDATA[and o.user_id =#{userId,jdbcType=VARCHAR}]]>
	    </if>
	    order by o.created_time desc
  	</select>
  	
  	<!-- 查询该用户是否有有效的订单 -->
	<select id="getValidOrderList" parameterType="String" resultType="int">
		<![CDATA[
			SELECT 
			    COUNT(*)
			FROM
			    bu_order o where
			        o.delflag = '1'
			        AND o.user_id = #{userId}
			        and o.order_status in ('1','2','3') 
		]]>	  
  	</select> 
  	
  	<!-- 查询该用户是否有有效的订单 -->
	<select id="selectOrderCountByPIdAndCId" parameterType="java.util.Map" resultType="int">
	
		<![CDATA[
			SELECT 
			    COUNT(*)
			FROM
			    bu_order
			        LEFT JOIN
			    bu_order_detail ON bu_order.order_id = bu_order_detail.order_id
			WHERE 
				bu_order.order_status IN (1 , 2, 3)
			]]>	  
			<if test="promotionId != null and promotionId != '' and promotionId != 'null' ">
				AND bu_order.promotion_id = #{promotionId,jdbcType=VARCHAR}
			</if>
			<if test="commodityId != null and commodityId != '' and commodityId != 'null' ">
				AND bu_order_detail.commodity_id = #{commodityId,jdbcType=VARCHAR}
			</if>
			<if test="playDate != null and playDate != '' and playDate != 'null' ">
				AND bu_order_detail.play_date = #{playDate,jdbcType=VARCHAR};
			</if>
		
  	</select> 
  	
  	<!-- 查询该用户0元的订单 -->
	<select id="getZeroOrderList" parameterType="java.util.Map" resultType="int">
		<![CDATA[
			SELECT 
				COUNT(*)
			FROM
				bu_order	
			WHERE 
				bu_order.order_status IN (1 , 2, 3)
			    and DATE_FORMAT(bu_order.created_time,'%Y-%c-%d') = curdate()
			]]>	  
			<if test="userId != null and userId != '' and userId != 'null' ">
				AND bu_order.user_id = #{userId,jdbcType=VARCHAR}
			</if>
			<if test="totalPrice != null and totalPrice != '' and totalPrice != 'null' ">
				AND bu_order.total_price = ${totalPrice}
			</if>
  	</select> 
</mapper>