<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.liketry.interaction.benison.dao.SpotMapper">
    <resultMap id="BaseResultMap" type="com.liketry.interaction.benison.model.Spot">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 18 10:32:25 CST 2017.
        -->
        <id column="spot_id" property="spotId" jdbcType="VARCHAR"/>
        <result column="spot_code" property="spotCode" jdbcType="VARCHAR"/>
        <result column="spot_name" property="spotName" jdbcType="VARCHAR"/>
        <result column="spot_status" property="spotStatus" jdbcType="CHAR"/>
        <result column="spot_province" property="spotProvince" jdbcType="VARCHAR"/>
        <result column="spot_city" property="spotCity" jdbcType="VARCHAR"/>
        <result column="spot_address" property="spotAddress" jdbcType="VARCHAR"/>
        <result column="spot_description" property="spotDescription" jdbcType="VARCHAR"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 18 10:32:25 CST 2017.
        -->
        spot_id, spot_code, spot_name, spot_status, spot_province, spot_city, spot_address,
        spot_description
    </sql>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 18 10:32:25 CST 2017.
        -->
        select
        <include refid="Base_Column_List"/>
        from bu_spot
        where spot_id = #{spotId,jdbcType=VARCHAR}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 18 10:32:25 CST 2017.
        -->
        delete from bu_spot
        where spot_id = #{spotId,jdbcType=VARCHAR}
    </delete>
    <insert id="insert" parameterType="com.liketry.interaction.benison.model.Spot">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 18 10:32:25 CST 2017.
        -->
        insert into bu_spot (spot_id, spot_code, spot_name,
        spot_status, spot_province, spot_city,
        spot_address, spot_description)
        values (#{spotId,jdbcType=VARCHAR}, #{spotCode,jdbcType=VARCHAR}, #{spotName,jdbcType=VARCHAR},
        #{spotStatus,jdbcType=CHAR}, #{spotProvince,jdbcType=VARCHAR}, #{spotCity,jdbcType=VARCHAR},
        #{spotAddress,jdbcType=VARCHAR}, #{spotDescription,jdbcType=VARCHAR})
    </insert>
    <insert id="insertSelective" parameterType="com.liketry.interaction.benison.model.Spot">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 18 10:32:25 CST 2017.
        -->
        insert into bu_spot
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="spotId != null">
                spot_id,
            </if>
            <if test="spotCode != null">
                spot_code,
            </if>
            <if test="spotName != null">
                spot_name,
            </if>
            <if test="spotStatus != null">
                spot_status,
            </if>
            <if test="spotProvince != null">
                spot_province,
            </if>
            <if test="spotCity != null">
                spot_city,
            </if>
            <if test="spotAddress != null">
                spot_address,
            </if>
            <if test="spotDescription != null">
                spot_description,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="spotId != null">
                #{spotId,jdbcType=VARCHAR},
            </if>
            <if test="spotCode != null">
                #{spotCode,jdbcType=VARCHAR},
            </if>
            <if test="spotName != null">
                #{spotName,jdbcType=VARCHAR},
            </if>
            <if test="spotStatus != null">
                #{spotStatus,jdbcType=CHAR},
            </if>
            <if test="spotProvince != null">
                #{spotProvince,jdbcType=VARCHAR},
            </if>
            <if test="spotCity != null">
                #{spotCity,jdbcType=VARCHAR},
            </if>
            <if test="spotAddress != null">
                #{spotAddress,jdbcType=VARCHAR},
            </if>
            <if test="spotDescription != null">
                #{spotDescription,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.liketry.interaction.benison.model.Spot">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 18 10:32:25 CST 2017.
        -->
        update bu_spot
        <set>
            <if test="spotCode != null">
                spot_code = #{spotCode,jdbcType=VARCHAR},
            </if>
            <if test="spotName != null">
                spot_name = #{spotName,jdbcType=VARCHAR},
            </if>
            <if test="spotStatus != null">
                spot_status = #{spotStatus,jdbcType=CHAR},
            </if>
            <if test="spotProvince != null">
                spot_province = #{spotProvince,jdbcType=VARCHAR},
            </if>
            <if test="spotCity != null">
                spot_city = #{spotCity,jdbcType=VARCHAR},
            </if>
            <if test="spotAddress != null">
                spot_address = #{spotAddress,jdbcType=VARCHAR},
            </if>
            <if test="spotDescription != null">
                spot_description = #{spotDescription,jdbcType=VARCHAR},
            </if>
        </set>
        where spot_id = #{spotId,jdbcType=VARCHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.liketry.interaction.benison.model.Spot">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 18 10:32:25 CST 2017.
        -->
        update bu_spot
        set spot_code = #{spotCode,jdbcType=VARCHAR},
        spot_name = #{spotName,jdbcType=VARCHAR},
        spot_status = #{spotStatus,jdbcType=CHAR},
        spot_province = #{spotProvince,jdbcType=VARCHAR},
        spot_city = #{spotCity,jdbcType=VARCHAR},
        spot_address = #{spotAddress,jdbcType=VARCHAR},
        spot_description = #{spotDescription,jdbcType=VARCHAR}
        where spot_id = #{spotId,jdbcType=VARCHAR}
    </update>

    <select id="selectAll" resultMap="BaseResultMap" parameterType="java.lang.String">
        select
        <include refid="Base_Column_List"/>
        from bu_spot
        <if test="_parameter != null and _parameter != ''">
            WHERE spot_status = #{spotStatus,jdbcType = CHAR}
        </if>
        <if test="_parameter == null">
            WHERE spot_status != '-1'
        </if>
    </select>

    <update id="deleteSport" parameterType="java.lang.String">
        UPDATE bu_spot
        SET spot_status = '-1'
        WHERE spot_id = #{spotId,jdbcType=VARCHAR}
  </update>

    <select id="selectBaseAll" resultMap="BaseResultMap">
        SELECT spot_id, spot_name FROM bu_spot WHERE spot_status != '-1'
    </select>
    <resultMap id="ResultApiMap" type="com.liketry.interaction.benison.vo.api.SpotVo">
        <id column="sid" property="spotId" jdbcType="VARCHAR"/>
        <result column="spot_code" property="spotCode" jdbcType="VARCHAR"/>
        <result column="spot_name" property="spotName" jdbcType="VARCHAR"/>
        <result column="spot_status" property="spotStatus" jdbcType="CHAR"/>
        <result column="spot_province" property="spotProvince" jdbcType="VARCHAR"/>
        <result column="spot_city" property="spotCity" jdbcType="VARCHAR"/>
        <result column="spot_address" property="spotAddress" jdbcType="VARCHAR"/>
        <result column="spot_description" property="spotDescription" jdbcType="VARCHAR"/>
        <collection property="screens" javaType="java.util.List" ofType="com.liketry.interaction.benison.vo.api.ScreenVo">
            <id column="screen_id" property="screenId" jdbcType="VARCHAR"/>
            <result column="cid" property="spotId" jdbcType="VARCHAR"/>
            <result column="cname" property="spotName" jdbcType="VARCHAR"/>
            <result column="screen_code" property="screenCode" jdbcType="VARCHAR"/>
            <result column="screen_name" property="screenName" jdbcType="VARCHAR"/>
            <result column="screen_status" property="screenStatus" jdbcType="CHAR"/>
            <result column="screen_location" property="screenLocation" jdbcType="VARCHAR"/>
            <result column="screen_longitude" property="screenLongitude" jdbcType="VARCHAR"/>
            <result column="screen_dimension" property="screenDimension" jdbcType="VARCHAR"/>
            <result column="screen_long" property="screenLong" jdbcType="VARCHAR"/>
            <result column="screen_wide" property="screenWide" jdbcType="VARCHAR"/>
            <result column="screen_size" property="screenSize" jdbcType="VARCHAR"/>
            <result column="screen_img" property="screenImg" jdbcType="VARCHAR"/>
            <result column="screen_resolution" property="screenResolution" jdbcType="VARCHAR"/>
            <result column="screen_description" property="screenDescription" jdbcType="VARCHAR"/>
        </collection>
    </resultMap>
    <select id="selectApiAll" resultMap="ResultApiMap">
        SELECT
bu_spot.spot_id sid, spot_code, spot_name, spot_status, spot_province, spot_city, spot_address, spot_description,
 bu_spot.spot_name cname, bu_screen.spot_id cid, screen_id, screen_code, screen_name, screen_status, screen_location,IFNULL(screen_longitude,'') as screen_longitude ,IFNULL(screen_dimension,'') as screen_dimension , screen_long
 ,screen_wide, screen_size, screen_resolution, screen_description,screen_img
 FROM bu_spot left join bu_screen on  bu_spot.spot_id = bu_screen.spot_id where bu_spot.spot_status = 1 and bu_screen.screen_status = 1
    </select>
</mapper>