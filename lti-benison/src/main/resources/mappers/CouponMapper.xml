<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.liketry.interaction.benison.dao.CouponMapper" >
  <resultMap id="BaseResultMap" type="com.liketry.interaction.benison.model.Coupon" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Oct 17 20:22:47 CST 2017.
    -->
    <id column="coupon_id" property="couponId" jdbcType="VARCHAR" />
    <result column="coupon_type_id" property="couponTypeId" jdbcType="VARCHAR" />
    <result column="coupon_code" property="couponCode" jdbcType="VARCHAR" />
    <result column="coupon_name" property="couponName" jdbcType="VARCHAR" />
    <result column="coupon_num" property="couponNum" jdbcType="INTEGER" />
    <result column="valid_type" property="validType" jdbcType="CHAR" />
    <result column="publish_type" property="publishType" jdbcType="CHAR" />
    <result column="use_type" property="useType" jdbcType="CHAR" />
    <result column="expire" property="expire" jdbcType="CHAR" />
    <result column="publish_target_type" property="publishTargetType" jdbcType="CHAR" />
    <result column="personal_name" property="personalName" jdbcType="VARCHAR" />
    <result column="id_card" property="idCard" jdbcType="VARCHAR" />
    <result column="merchant_name" property="merchantName" jdbcType="VARCHAR" />
    <result column="business_licence" property="businessLicence" jdbcType="VARCHAR" />
    <result column="valid_date" property="validDate" jdbcType="DATE" />
    <result column="publish_by" property="publishBy" jdbcType="VARCHAR" />
    <result column="publish_date" property="publishDate" jdbcType="TIMESTAMP" />
    <result column="order_code" property="orderCode" jdbcType="VARCHAR" />
    <result column="use_time" property="useTime" jdbcType="TIMESTAMP" />
    <result column="created_time" property="createdTime" jdbcType="TIMESTAMP" />
    <result column="created_by" property="createdBy" jdbcType="VARCHAR" />
    <result column="modified_time" property="modifiedTime" jdbcType="TIMESTAMP" />
    <result column="modified_by" property="modifiedBy" jdbcType="VARCHAR" />
    <result column="version" property="version" jdbcType="INTEGER" />
    <result column="delflag" property="delflag" jdbcType="CHAR" />
  </resultMap>
  
  <resultMap id="NewBaseResultMap" type="com.liketry.interaction.benison.vo.api.CouponVO" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Oct 17 20:22:47 CST 2017.
    -->
    <id column="coupon_id" property="couponId" jdbcType="VARCHAR" />
    <result column="coupon_type_id" property="couponTypeId" jdbcType="VARCHAR" />
    <result column="coupon_code" property="couponCode" jdbcType="VARCHAR" />
    <result column="coupon_name" property="couponName" jdbcType="VARCHAR" />
    <result column="coupon_num" property="couponNum" jdbcType="INTEGER" />
    <result column="valid_type" property="validType" jdbcType="CHAR" />
    <result column="publish_type" property="publishType" jdbcType="CHAR" />
    <result column="use_type" property="useType" jdbcType="CHAR" />
    <result column="expire" property="expire" jdbcType="CHAR" />
    <result column="publish_target_type" property="publishTargetType" jdbcType="CHAR" />
    <result column="personal_name" property="personalName" jdbcType="VARCHAR" />
    <result column="id_card" property="idCard" jdbcType="VARCHAR" />
    <result column="merchant_name" property="merchantName" jdbcType="VARCHAR" />
    <result column="business_licence" property="businessLicence" jdbcType="VARCHAR" />
    <result column="valid_date" property="validDate" jdbcType="DATE" />
    <result column="publish_by" property="publishBy" jdbcType="VARCHAR" />
    <result column="publish_date" property="publishDate" jdbcType="TIMESTAMP" />
    <result column="order_code" property="orderCode" jdbcType="VARCHAR" />
    <result column="use_time" property="useTime" jdbcType="TIMESTAMP" />
    <result column="created_time" property="createdTime" jdbcType="TIMESTAMP" />
    <result column="created_by" property="createdBy" jdbcType="VARCHAR" />
    <result column="modified_time" property="modifiedTime" jdbcType="TIMESTAMP" />
    <result column="modified_by" property="modifiedBy" jdbcType="VARCHAR" />
    <result column="version" property="version" jdbcType="INTEGER" />
    <result column="delflag" property="delflag" jdbcType="CHAR" />
    <result column="coupon_type_code" property="couponTypeCode" jdbcType="VARCHAR" />
    <result column="coupon_name" property="couponName" jdbcType="VARCHAR" />
    <result column="coupon_type" property="couponType" jdbcType="CHAR" />
    <result column="valid_type" property="validType" jdbcType="CHAR" />
    <result column="publish_type" property="publishType" jdbcType="CHAR" />
    <result column="special_offer" property="specialOffer" jdbcType="DECIMAL" />
    <result column="discount" property="discount" jdbcType="DECIMAL" />
    <result column="deduction" property="deduction" jdbcType="DECIMAL" />
  </resultMap>
  
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Oct 17 20:22:47 CST 2017.
    -->
    coupon_id, coupon_type_id, coupon_code, coupon_name, coupon_num, valid_type, publish_type, 
    use_type, expire, publish_target_type, personal_name, id_card, merchant_name, business_licence, 
    valid_date, publish_by, publish_date, order_code, use_time, created_time, created_by, 
    modified_time, modified_by, version, delflag
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Oct 17 20:22:47 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from bu_coupon
    where coupon_id = #{couponId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Oct 17 20:22:47 CST 2017.
    -->
    delete from bu_coupon
    where coupon_id = #{couponId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.liketry.interaction.benison.model.Coupon" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Oct 17 20:22:47 CST 2017.
    -->
    insert into bu_coupon (coupon_id, coupon_type_id, coupon_code, 
      coupon_name, coupon_num, valid_type, 
      publish_type, use_type, expire, 
      publish_target_type, personal_name, id_card, 
      merchant_name, business_licence, valid_date, 
      publish_by, publish_date, order_code, 
      use_time, created_time, created_by, 
      modified_time, modified_by, version, 
      delflag)
    values (#{couponId,jdbcType=VARCHAR}, #{couponTypeId,jdbcType=VARCHAR}, #{couponCode,jdbcType=VARCHAR}, 
      #{couponName,jdbcType=VARCHAR}, #{couponNum,jdbcType=INTEGER}, #{validType,jdbcType=CHAR}, 
      #{publishType,jdbcType=CHAR}, #{useType,jdbcType=CHAR}, #{expire,jdbcType=CHAR}, 
      #{publishTargetType,jdbcType=CHAR}, #{personalName,jdbcType=VARCHAR}, #{idCard,jdbcType=VARCHAR}, 
      #{merchantName,jdbcType=VARCHAR}, #{businessLicence,jdbcType=VARCHAR}, #{validDate,jdbcType=DATE}, 
      #{publishBy,jdbcType=VARCHAR}, #{publishDate,jdbcType=TIMESTAMP}, #{orderCode,jdbcType=VARCHAR}, 
      #{useTime,jdbcType=TIMESTAMP}, #{createdTime,jdbcType=TIMESTAMP}, #{createdBy,jdbcType=VARCHAR}, 
      #{modifiedTime,jdbcType=TIMESTAMP}, #{modifiedBy,jdbcType=VARCHAR}, #{version,jdbcType=INTEGER}, 
      #{delflag,jdbcType=CHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.liketry.interaction.benison.model.Coupon" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Oct 17 20:22:47 CST 2017.
    -->
    insert into bu_coupon
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="couponId != null" >
        coupon_id,
      </if>
      <if test="couponTypeId != null" >
        coupon_type_id,
      </if>
      <if test="couponCode != null" >
        coupon_code,
      </if>
      <if test="couponName != null" >
        coupon_name,
      </if>
      <if test="couponNum != null" >
        coupon_num,
      </if>
      <if test="validType != null" >
        valid_type,
      </if>
      <if test="publishType != null" >
        publish_type,
      </if>
      <if test="useType != null" >
        use_type,
      </if>
      <if test="expire != null" >
        expire,
      </if>
      <if test="publishTargetType != null" >
        publish_target_type,
      </if>
      <if test="personalName != null" >
        personal_name,
      </if>
      <if test="idCard != null" >
        id_card,
      </if>
      <if test="merchantName != null" >
        merchant_name,
      </if>
      <if test="businessLicence != null" >
        business_licence,
      </if>
      <if test="validDate != null" >
        valid_date,
      </if>
      <if test="publishBy != null" >
        publish_by,
      </if>
      <if test="publishDate != null" >
        publish_date,
      </if>
      <if test="orderCode != null" >
        order_code,
      </if>
      <if test="useTime != null" >
        use_time,
      </if>
      <if test="createdTime != null" >
        created_time,
      </if>
      <if test="createdBy != null" >
        created_by,
      </if>
      <if test="modifiedTime != null" >
        modified_time,
      </if>
      <if test="modifiedBy != null" >
        modified_by,
      </if>
      <if test="version != null" >
        version,
      </if>
      <if test="delflag != null" >
        delflag,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="couponId != null" >
        #{couponId,jdbcType=VARCHAR},
      </if>
      <if test="couponTypeId != null" >
        #{couponTypeId,jdbcType=VARCHAR},
      </if>
      <if test="couponCode != null" >
        #{couponCode,jdbcType=VARCHAR},
      </if>
      <if test="couponName != null" >
        #{couponName,jdbcType=VARCHAR},
      </if>
      <if test="couponNum != null" >
        #{couponNum,jdbcType=INTEGER},
      </if>
      <if test="validType != null" >
        #{validType,jdbcType=CHAR},
      </if>
      <if test="publishType != null" >
        #{publishType,jdbcType=CHAR},
      </if>
      <if test="useType != null" >
        #{useType,jdbcType=CHAR},
      </if>
      <if test="expire != null" >
        #{expire,jdbcType=CHAR},
      </if>
      <if test="publishTargetType != null" >
        #{publishTargetType,jdbcType=CHAR},
      </if>
      <if test="personalName != null" >
        #{personalName,jdbcType=VARCHAR},
      </if>
      <if test="idCard != null" >
        #{idCard,jdbcType=VARCHAR},
      </if>
      <if test="merchantName != null" >
        #{merchantName,jdbcType=VARCHAR},
      </if>
      <if test="businessLicence != null" >
        #{businessLicence,jdbcType=VARCHAR},
      </if>
      <if test="validDate != null" >
        #{validDate,jdbcType=DATE},
      </if>
      <if test="publishBy != null" >
        #{publishBy,jdbcType=VARCHAR},
      </if>
      <if test="publishDate != null" >
        #{publishDate,jdbcType=TIMESTAMP},
      </if>
      <if test="orderCode != null" >
        #{orderCode,jdbcType=VARCHAR},
      </if>
      <if test="useTime != null" >
        #{useTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createdTime != null" >
        #{createdTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createdBy != null" >
        #{createdBy,jdbcType=VARCHAR},
      </if>
      <if test="modifiedTime != null" >
        #{modifiedTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifiedBy != null" >
        #{modifiedBy,jdbcType=VARCHAR},
      </if>
      <if test="version != null" >
        #{version,jdbcType=INTEGER},
      </if>
      <if test="delflag != null" >
        #{delflag,jdbcType=CHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.liketry.interaction.benison.model.Coupon" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Oct 17 20:22:47 CST 2017.
    -->
    update bu_coupon
    <set >
      <if test="couponTypeId != null" >
        coupon_type_id = #{couponTypeId,jdbcType=VARCHAR},
      </if>
      <if test="couponCode != null" >
        coupon_code = #{couponCode,jdbcType=VARCHAR},
      </if>
      <if test="couponName != null" >
        coupon_name = #{couponName,jdbcType=VARCHAR},
      </if>
      <if test="couponNum != null" >
        coupon_num = #{couponNum,jdbcType=INTEGER},
      </if>
      <if test="validType != null" >
        valid_type = #{validType,jdbcType=CHAR},
      </if>
      <if test="publishType != null" >
        publish_type = #{publishType,jdbcType=CHAR},
      </if>
      <if test="useType != null" >
        use_type = #{useType,jdbcType=CHAR},
      </if>
      <if test="expire != null" >
        expire = #{expire,jdbcType=CHAR},
      </if>
      <if test="publishTargetType != null" >
        publish_target_type = #{publishTargetType,jdbcType=CHAR},
      </if>
      <if test="personalName != null" >
        personal_name = #{personalName,jdbcType=VARCHAR},
      </if>
      <if test="idCard != null" >
        id_card = #{idCard,jdbcType=VARCHAR},
      </if>
      <if test="merchantName != null" >
        merchant_name = #{merchantName,jdbcType=VARCHAR},
      </if>
      <if test="businessLicence != null" >
        business_licence = #{businessLicence,jdbcType=VARCHAR},
      </if>
      <if test="validDate != null" >
        valid_date = #{validDate,jdbcType=DATE},
      </if>
      <if test="publishBy != null" >
        publish_by = #{publishBy,jdbcType=VARCHAR},
      </if>
      <if test="publishDate != null" >
        publish_date = #{publishDate,jdbcType=TIMESTAMP},
      </if>
      <if test="orderCode != null" >
        order_code = #{orderCode,jdbcType=VARCHAR},
      </if>
      <if test="useTime != null" >
        use_time = #{useTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createdTime != null" >
        created_time = #{createdTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createdBy != null" >
        created_by = #{createdBy,jdbcType=VARCHAR},
      </if>
      <if test="modifiedTime != null" >
        modified_time = #{modifiedTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifiedBy != null" >
        modified_by = #{modifiedBy,jdbcType=VARCHAR},
      </if>
      <if test="version != null" >
        version = #{version,jdbcType=INTEGER},
      </if>
      <if test="delflag != null" >
        delflag = #{delflag,jdbcType=CHAR},
      </if>
    </set>
    where coupon_id = #{couponId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.liketry.interaction.benison.model.Coupon" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Oct 17 20:22:47 CST 2017.
    -->
    update bu_coupon
    set coupon_type_id = #{couponTypeId,jdbcType=VARCHAR},
      coupon_code = #{couponCode,jdbcType=VARCHAR},
      coupon_name = #{couponName,jdbcType=VARCHAR},
      coupon_num = #{couponNum,jdbcType=INTEGER},
      valid_type = #{validType,jdbcType=CHAR},
      publish_type = #{publishType,jdbcType=CHAR},
      use_type = #{useType,jdbcType=CHAR},
      expire = #{expire,jdbcType=CHAR},
      publish_target_type = #{publishTargetType,jdbcType=CHAR},
      personal_name = #{personalName,jdbcType=VARCHAR},
      id_card = #{idCard,jdbcType=VARCHAR},
      merchant_name = #{merchantName,jdbcType=VARCHAR},
      business_licence = #{businessLicence,jdbcType=VARCHAR},
      valid_date = #{validDate,jdbcType=DATE},
      publish_by = #{publishBy,jdbcType=VARCHAR},
      publish_date = #{publishDate,jdbcType=TIMESTAMP},
      order_code = #{orderCode,jdbcType=VARCHAR},
      use_time = #{useTime,jdbcType=TIMESTAMP},
      created_time = #{createdTime,jdbcType=TIMESTAMP},
      created_by = #{createdBy,jdbcType=VARCHAR},
      modified_time = #{modifiedTime,jdbcType=TIMESTAMP},
      modified_by = #{modifiedBy,jdbcType=VARCHAR},
      version = #{version,jdbcType=INTEGER},
      delflag = #{delflag,jdbcType=CHAR}
    where coupon_id = #{couponId,jdbcType=VARCHAR}
  </update>
  
  <select id="selectByCode" parameterType="java.lang.String" resultMap="NewBaseResultMap">
     SELECT 
	    c.*,
	    ct.coupon_type,
	    ct.deduction,
	    ct.discount,
	    ct.coupon_name,
	    ct.publish_type,
	    ct.valid_type,
	    ct.special_offer,
	    ct.coupon_type_code
	FROM
	    bu_coupon c
	        LEFT JOIN
	    bu_coupon_type ct ON c.coupon_type_id = ct.coupon_type_id
	WHERE
	    c.coupon_code = #{code,jdbcType=VARCHAR}
  </select>
</mapper>